Бот состоит из следующих файлов:
  -referendum.py — сам бот
  -referendum_db.py — работа с БД(SQLite)
  -referendums.db — файл БД. Создаётся автоматически, имя файла указывается в config.py
  -referendums.log — лог. Создаётся автоматически, имя файла указывается в config.py
  -config.py — настроечный файл. В нём задаются константы:    
    --TOKEN = 'Токен бота'
    --FILE_LOG = 'referendums.log'
    --FILE_DB = 'referendums.db'
    --RFR_GAME = 0    — тип опроса(rfr_type) для команды /game
    --RFR_SINGLE = 1  — тип опроса(rfr_type) для команды /single
    --RFR_MULTI = 2   — тип опроса(rfr_type) для команды /multi
    --RFR_GAME2 = 3   — тип опроса(rfr_type) для команды /game2

Бота нужно добавить в группу с правами администратора.
Команды выполняются в группе, после выполнения бот удалит сообщение с командой.
Все команды выполняются только для своих опросов, чужие опросы изменять нельзя.
Можно создавать несколько опросов одновременно, как в одной группе, так и в разных.
Опросы хранятся в БД на сервере, в отдельном файле ведётся лог опросов. Формат лога:
[TIMESTAMP] [LEVEL] [FUNCTION]: chatID=-100<id группы>(<имя группы>), msg_id=<id сообщения с опросом>, <текст лога>

Команды бота:

/start - выводит описание бота
/help  - выводит список команд

1.a)  /game game_cost|max_players|last_games|заголовок|кнопка_да|кнопка_нет|кнопка_?|кнопка_+|кнопка_-
1.b)  /single заголовок|кнопка_1|...|кнопка_N
1.c)  /multi заголовок|кнопка_1|...|кнопка_N
1.d)  /game2 game_cost|max_players|last_games|заголовок|кнопка_да|кнопка_нет|кнопка_?|кнопка_+|кнопка_-|дополнительная_кнопка
2.    /get status*
3.    /close msg_id*
4.    /open msg_id
5.    /update msg_id|game_cost|max_players|last_games|заголовок|кнопка_1|...|кнопка_N
6.    /add_btn msg_id|кнопка
7.    /log msg_id*
8.    /get_reg player_type**
9.    /set_reg user_id|player_type
10.   /del_reg user_id_1|user_id_2|...|user_id_N
11.   /ban user_id
12.   /unban user_id
13.   /get_silent msg_id*
14.   /notify msg_id*|текст
15.   /notifyq msg_id*|текст
16.   /getstat last_games|msg_id**
      *   — необязательный параметр, при наличии только одного своего открытого опроса в группе
      **  — необязательный параметр
      *** — обязательный параметр, если 0 - статистика не используется

1. Создать опрос.

  Виды опросов:
    a) Опрос на игру. Пять кнопок (да, нет, ?, +друг, -друг). Выбирать можно только один вариант из трёх кнопок (да, нет, ?); кнопками +друг и -друг можно указать количество твоих друзей, кто придёт с тобой на игру.
        
        Команда:
          /game game_cost|max_players|last_games|заголовок|кнопка_да|кнопка_нет|кнопка_?|кнопка_+|кнопка_-

        Параметры:
          -game_cost — общая стоимость игры. В опросе выводится стоимость игры для одного игрока, исходя из общей стоимости и количества проголосовавших положительно. Если параметр не нужен - указать 0;
          -max_players — лимит игроков на игру. При достижении лимита, игроки добавляются в очередь, выводятся в отдельном списке. При появлении свободного места в основном списке игроков, в него добавляется первый игрок из очереди. Если параметр не нужен - указать 0. Если параметр задан, в заголовке выводится информация о набранных игроках;
          -last_games — количество прошлых опросов, за которые собирается статистика попаданий в кворум. Чем больше попаданий, тем больше приоритет в очереди из нажавших в текущем опросе кнопку "кнопка_да". Если параметр не нужен - указать 0;
          -заголовок — заголовок опроса;
          -кнопка_N — текст кнопки N.

          Все параметры обязательные. Если game_cost, max_players, last_games не нужны, нужно указать 0.

        В опросе выводятся следующие статистические данные:
        -Кворум — количество игроков, проголосовавших положительно. Если используется учёт постоянных игроков (см. п.8 и п.9), то в скобках выводится количество постоянных(пост) и непостоянных(раз);
        -Стоимость — стоимость игры на одного игрока. Выводится, если указана общая стоимость игры game_cost;
        -Свободных мест — количество свободных мест. Выводится, если указано максимальное количество игроков max_players;
        -Очередь — количество игроков в очереди. Выводится, если указано максимальное количество игроков max_players и оно было достигнуто;
        -Следующий — первый игрок из очереди. Выводится, если указано максимальное количество игроков max_players и оно было достигнуто.
        
        Тип опроса в БД rfr_type = 0.

    b) Простой опрос. Сколько угодно кнопок, выбирать можно только один вариант, при повторном нажатии голос отменяется. В случае, если кнопка была нажата и нажимается кнопка другого варианта, голос меняется на новый вариант.

        Команда:
          /single заголовок|кнопка_1|...|кнопка_N

        Параметры:
          -заголовок — заголовок опроса;
          -кнопка_N — текст кнопки N.
        
        Тип опроса в БД rfr_type = 1.

    c) Опрос с множественным выбором. Сколько угодно кнопок, выбирать можно несколько вариантов, при повторном нажатии голос отменяется.
        
        Команда:
          /multi заголовок|кнопка_1|...|кнопка_N

        Параметры:
          -заголовок — заголовок опроса;
          -кнопка_N — текст кнопки N.
        
        Тип опроса в БД rfr_type = 2.
    
    d) Опрос на игру. Тоже, что и в п. a), но присутствует дополнительная кнопка для второстепенного опроса

        Команда:
          /game2 game_cost|max_players|last_games|заголовок|кнопка_да|кнопка_нет|кнопка_?|кнопка_+|кнопка_-|дополнительная_кнопка

        Параметры:
          -game_cost — общая стоимость игры. В опросе выводится стоимость игры для одного игрока, исходя из общей стоимости и количества проголосовавших положительно. Если параметр не нужен - указать 0;
          -max_players — лимит игроков на игру. При достижении лимита, игроки добавляются в очередь, выводятся в отдельном списке. При появлении свободного места в основном списке игроков, в него добавляется первый игрок из очереди. Если параметр не нужен - указать 0. Если параметр задан, в заголовке выводится информация о набранных игроках;
          -last_games — количество прошлых опросов, за которые собирается статистика попаданий в кворум. Чем больше попаданий, тем больше приоритет в очереди из нажавших в текущем опросе кнопку "кнопка_да". Если параметр не нужен - указать 0;
          -заголовок — заголовок опроса;
          -кнопка_N — текст кнопки N.

        Все параметры обязательные. Если game_cost, max_players, last_games не нужны, нужно указать 0.

        В опросе выводятся следующие статистические данные:
        -Кворум — количество игроков, проголосовавших положительно. Если используется учёт постоянных игроков (см. п.8 и п.9), то в скобках выводится колическо постоянных(пост) и непостоянных(раз);
        -Стоимость — стоимость игры на одного игрока. Выводится, если указана общая стоимость игры game_cost;
        -Свободных мест — количество свободных мест. Выводится, если указано максимальное количество игроков max_players;
        -Очередь — количество игроков в очереди. Выводится, если указано максимальное количество игроков max_players и оно было достигнуто;
        -Следующий — первый игрок из очереди. Выводится, если указано максимальное количество игроков max_players и оно было достигнуто.        

        Тип опроса в БД rfr_type = 3.

  После создания опроса бот закрепит опрос в группе.

2. Получить список своих опросов.
    Команда:
      /get status*

    Бот вернёт в личном сообщении список опросов в следующем формате:
    {-100<id группы>(<название группы>), msg_id = <id сообщения с опросом>, заголовок = <заголовок опроса>}

    msg_id используется для закрытия, открытия и редактирования опроса.

    Параметры:
      -status — статус опроса (1 - открытые, 0 - закрытые). Необязательный параметр, при отсутствии, возвращаются все опросы.
  
3. Закрыть опрос.
    Команда:
      /close msg_id*

    Параметры:
      -msg_id — id сообщения с опросом, берётся из команды /get. Необязательный параметр при наличии только одного своего открытого опроса в группе.
  
    Бот закроет и открепит опрос в группе. В случае, если твой открытый опрос в группе только один, msg_id указывать необязательно.

4. Открыть опрос заново.
    Команда:
      /open msg_id

    Параметры:
      -msg_id — id сообщения с опросом, берётся из команды /get.

    Открывает опрос заново и закрепляет в группе.

5. Редактировать опрос.
    Команда:
      /update msg_id|game_cost|max_players|заголовок|кнопка_1|...|кнопка_N

    Параметры:
      -msg_id — id сообщения с опросом, берётся из команды /get;
      -game_cost — общая стоимость игры. В опросе выводится стоимость игры для одного игрока, исходя из общей стоимости и количества проголосовавших положительно. Если параметр не нужен - указать 0;
      -max_players — лимит игроков на игру. При достижении лимита, игроки добавляются в очередь, выводятся в отдельном списке. При появлении свободного места в основном списке игроков, в него добавляется первый игрок из очереди. Если параметр не нужен - указать 0;
      -заголовок — заголовок опроса;
      -кнопка_N — текст кнопки N.

      Как минимум два параметра должны быть указаны - msg_id и game_cost. Следующие по списку параметры необязательны. Если нужно поменять параметр с порядковым номером i, то необходимо указать и все параметры с порядковыми номерами меньше i. Например, если нужно поменять текст кнопки 1, то необходимо выполнить команду:
      /update msg_id|game_cost|max_players|заголовок|кнопка_1

6. Добавить кнопку в опрос типа 1.b или 1.c.
    Команда:
      /add_btn msg_id|кнопка

    Параметры:
      -msg_id — id сообщения с опросом, берётся из команды /get;
      -кнопка — текст кнопки.

7. Вывод лога опроса.
    Команда:
      /log msg_id*

    Параметры:
      -msg_id — id сообщения с опросом, берётся из команды /get. Необязательный параметр при наличии только одного своего открытого опроса в группе.

8. Получить список регулярных игроков.
    Команда:
      /get_reg player_type*

    Параметры:
      -player_type  — тип игрока: 0 - нерегулярный, 1 - регулярный, 2 - забаненый.

    Бот вернёт в личном сообщении список регулярных игроков в следующем формате:
    {-100<id группы>(<название группы>)}
    {user_id = <id пользователя Telegram>(<user_name>), player_type = <player_type>}

    Регулярные игроки выделяются в опросе жирным шрифтом.
    Список регулярных игроков уникален для каждой группы (но не опроса).

9. Добавить игрока в список регулярных игроков.
    Команда:
      /set_reg user_id|player_type

    Параметры:
      -user_id      — id пользователя Telegram, берётся из команды /get_reg;
      -player_type  — тип игрока: 0 - нерегулярный, 1 - регулярный, 2 - забаненный.

    Помимо ручного добавления, игроки в этот список добавляются автоматически при первом нажатии в группе любой кнопки опроса. При этом тип игрока устанавливается в 0 (нерегулярный).
    Список регулярных игроков уникален для каждой группы (но не опроса).

10. Удалить игрока из списка регулярных игроков.
    Команда:
      /del_reg user_id_1|user_id_2|...|user_id_N

    Параметры:
      -user_id — id пользователя Telegram, берётся из команды /get_reg.   

    Команда удалит регулярных игроков из списка группы, в которой была выполнена. Необходимы права администратора в группе.

11. Поставить ограничение на нажатие кнопок в опросе.
    Команда:
      /ban user_id

    Параметры:
      -user_id — id пользователя Telegram, берётся из команды /get_reg.

    Список забаненых игроков уникален для каждой группы (но не опроса).

12. Снять ограничение на нажатие кнопок в опросе.
    Команда:
      /unban user_id

    Параметры:
      -user_id      — id пользователя Telegram, берётся из команды /get_reg.

13. Получить список непроголосовавших участников группы.
    Команда:
      /get_silent msg_id*

    Параметры:
      -msg_id — id сообщения с опросом, берётся из команды /get. Необязательный параметр при наличии только одного своего открытого опроса в группе.

    Бот вернёт в личном сообщении список участников группы, которые хотя бы раз участвовали в опросах, но в указанном/текущем опросе не участвовали.

    Формат сообщения:
    {-100<id группы>(<название группы>), user_id = <id пользователя Telegram>, user_name = <Имя>}

14. Уведомить участников группы, не отметившихся в опросе.
    Команда:
      /notify msg_id*|текст

    Параметры:
      -msg_id — id сообщения с опросом, берётся из команды /get;
      -текст — текст сообщения.

    Бот напишет в группу сообщение с текстом и добавит тэги участников группы в начале сообщения.

15. Уведомить участников группы, нажавших в опросе вида 1.a) и 1.d) кнопку "?".
    Команда:
      /notifyq msg_id*|текст

    Параметры:
      -msg_id — id сообщения с опросом, берётся из команды /get;
      -текст — текст сообщения.

    Бот напишет в группу сообщение с текстом и добавит тэги участников группы в начале сообщения.

16. Получить статистику по игрокам.
    Команда:
      /getstat last_games|msg_id*

    Параметры:
      -last_games — количество опросов, за которые выводится статистика;
      -msg_id — id сообщения с опросом, берётся из команды /get.

    Бот вернёт в личном сообщении список игроков и количество участий игрока в кворуме за предыдущие last_games опросов. В статистике участвуют опросы вида 1.a) и 1.d). Статистика отсчитывается за прошлые last_games опросов от:
      - от текущего момента, если msg_id не указан;
      - от даты опроса, указанного в msg_id.
